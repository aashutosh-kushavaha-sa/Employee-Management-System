<div class="flex">
  <app-sidebar />

  <div class="flex-1 ml-64">
    <app-update-modal></app-update-modal>

    <div class="p-8 bg-gray-100 min-h-screen">

      <!-- Header Row -->
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-gray-800">All Employees</h1>

        <!-- Search Box + Icon -->
        <div class="relative">
          <input
            type="text"
            placeholder="Search employees..."
            class="pl-10 pr-4 py-2 w-72 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-800"
            (input)="search($event)"
          />
          <fa-icon
            [icon]="faSearch"
            class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-4 h-4"
          ></fa-icon>
        </div>
      </div>

      <!-- Table Container -->
      <div class="overflow-auto bg-white rounded-xl shadow-xl border border-gray-300">

        <table class="min-w-full table-auto">

          <!-- Table Head -->
          <thead class="bg-gray-900 text-white sticky top-0 z-10">
            <tr>
              <th class="px-4 py-3 text-left">ID</th>
              <th class="px-4 py-3 text-left">Name</th>
              <th class="px-4 py-3 text-left">Age</th>
              <th class="px-4 py-3 text-left">Gender</th>
              <th class="px-4 py-3 text-left">Email</th>
              <th class="px-4 py-3 text-left">Position</th>
              <th class="px-4 py-3 text-left">Department</th>
              <th class="px-4 py-3 text-left">Salary</th>
              <th class="px-4 py-3 text-center">Update</th>
              <th class="px-4 py-3 text-center">Delete</th>
            </tr>
          </thead>

          <!-- Table Body -->
          <tbody>
            @for (emp of filteredData; track $index) {
            <tr
              class="border-b hover:bg-blue-50 transition-all cursor-pointer even:bg-gray-50 text-gray-800"
            >
              <td class="px-4 py-3 font-medium text-gray-700">{{ emp._id }}</td>
              <td class="px-4 py-3">{{ emp.name }}</td>
              <td class="px-4 py-3">{{ emp.age }}</td>
              <td class="px-4 py-3 capitalize">{{ emp.gender }}</td>
              <td class="px-4 py-3">{{ emp.email }}</td>
              <td class="px-4 py-3">{{ emp.position }}</td>
              <td class="px-4 py-3">{{ emp.department }}</td>
              <td class="px-4 py-3 text-green-700 font-semibold">â‚¹{{ emp.salary }}</td>

              <!-- Update Button -->
              <td class="px-4 py-3 text-center">
                <button
                  class="px-4 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition shadow-md"
                  (click)="openUpdate(emp)"
                >
                  Update
                </button>
              </td>

              <!-- Delete Button -->
              <td class="px-4 py-3 text-center">
                <button
                  class="px-4 py-1 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition shadow-md"
                  (click)="deleteEmployee(emp._id)"
                >
                  Delete
                </button>
              </td>
            </tr>
            }
          </tbody>

        </table>
      </div>
    </div>
  </div>
</div>
